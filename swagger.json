{
    "swagger":"2.0",
    "info": {
        "version": "1.0.0", 
        "title": "EasyLib",
        "description": "Documentazione API di EasyLib"
    },
    "host": "localhost:3000",
    "basePath": "/",
    "schemes": ["http", "https"],
    "paths": {
        "/SignUp" : {
        "post" : {
            "tags" : ["utente"],
            "summary" : "Usata per registrare un nuovo utente.",
            "parameters" : [{
            "name" : "body",
            "in" : "body",
            "description" : "Le informazioni sul nuovo utente da creare",
            "schema" : {
                "$ref" : "#/definitions/Utente"
            }
        }
    ],
        "responses" : {
            "201": {
                "description" : "CREATED. Utente creato correttamente."
            },
            "400": {
                "description" : "BAD REQUEST. Errore in seguito alll'inserimento di un indirzzo email o una password non validi"
            },"500": {
                "description" : "SERVER ERROR. Utente gi√† presente in archivio."
            }
        }
    }
    },
    "/login": {
        "post": {
          "tags": ["Authentication"],
          "summary": "Login dello'utente",
          "parameters": [
            {
              "name": "body",
              "in": "body",
              "description": "Informazioni dell'utente che effettua il login",
              "required": true,
              "schema": {
                "$ref": "#/definitions/Utente"
              }
            }
          ],
          "responses": {
            "200": {
              "description": "OK. Login effettuato con successo",
              "schema": {
                "type": "object",
                "properties": {
                  "token": { "type": "string" }
                }
              }
            },
            "400": {
              "description": "BAD REQUEST. Mail o password non corrette"
            }
          }
        }
      },
      "/logout": {
        "post": {
          "tags": ["Authentication"],
          "summary": "Logout dell'utente",
          "responses": {
            "200": {
              "description": "OK. Logout eseguito correttamente"
            }
          }
        }
      },
      "/createApp": {
        "post": {
          "tags": ["Utente"],
          "summary": "Crea un appuntamento",
          "parameters": [
            {
              "name": "body",
              "in": "body",
              "description": "Dettagli dell'appuntamento",
              "required": true,
              "schema": {
                "$ref": "#/definitions/Appuntamento"
              }
            }
          ],
          "responses": {
            "200": {
              "description": "OK. Appuntamento creato "
            },
            "400": {
              "description": "BAD REQUEST. Data non valida"
            },
            "404": {
              "description": "NOT  FOUND. Utente non trovato"
            },
            "500": {
              "description": "SERVER ERROR. Errore del server."
            }
          }
        }
      },
    "/createPren": {
        "post" : {
            "tags" : ["utente"],
            "summary" : "usata per creare una nuova prenotazione",
            "responses" :{
                "200" : {
                    "description" : "OK. Prenotazione creata correttamente."
                },
                "404" : {
                    "description" : "NOT FOUND. Utente o libro  non trovato."
                },
                "500" : {
                    "description" : "SERVER ERROR. Errore del server."
                }  
            }
        }
    },
    "/deleteAppuntamento": {
        "delete": {
          "tags": ["Utente"],
          "summary": "Cancella un appuntamento",
          "parameters": [
            {
              "name": "mail",
              "in": "query",
              "description": "email dell'utente",
              "required": true,
              "type": "string"
            }
          ],
          "responses": {
            "200": {
              "description": "OK. Appuntamento cancellato correttamente"
            },
            "404": {
              "description": "NOT FOUND. Appuntamento non trovato"
            }
          }
        }
      },
      "/arrayLibri": {
        "get": {
          "tags": ["Utente"],
          "summary": "Mostra i libri noleggiati da un utente",
          "parameters": [
            {
              "name": "mail",
              "in": "query",
              "description": "Email dell'utente",
              "required": true,
              "type": "string"
            }
          ],
          "responses": {
            "200": {
              "description": "OK. Lista dei libri",
              "schema": {
                "type": "array",
                "items": {
                  "$ref": "#/definitions/Book"
                }
              }
            },
            "404": {
              "description": "NOT FOUND. Lista non trovata"
            }
          }
        }
      },
        "/getAll": {
            "get": {
                "tags": ["Admin"],
                "summary": "Fetch utenti",
                "responses": {
                    "200": {
                      "description": "OK. Lista di tutti gli  utenti",
                      "schema": {
                        "type": "array",
                        "items": {
                          "$ref": "#/definitions/Utente"
                        }
                      }
                    },
                    "404": {
                      "description": "BAD REQUEST. Nessun utente trovato"
                    }
                }
            }
         },
         "/ricerca": {
            "get": {
              "tags": ["Book"],
              "summary": "Cerca un libro",
              "parameters": [
                {
                  "name": "titolo",
                  "in": "query",
                  "description": "titolo del libro",
                  "required": false,
                  "type": "string"
                },
                {
                  "name": "Author_sur",
                  "in": "query",
                  "description": "Cognome dell'autore",
                  "required": false,
                  "type": "string"
                },
                {
                  "name": "Author_name",
                  "in": "query",
                  "description": "Nome dell'autore",
                  "required": false,
                  "type": "string"
                }
              ],
              "responses": {
                "200": {
                  "description": "OK. Libri trovati",
                  "schema": {
                    "type": "array",
                    "items": {
                      "$ref": "#/definitions/Book"
                    }
                  }
                },
                "400": {
                  "description": "BAD REQUEST. Nessun parametro di ricerca inserito"
                },
                "404": {
                  "description": "NOT FOUND. Nessun libro trovato"
                }
              }
            }
          },
        "/Cancella_Libro": {
            "delete": {
              "tags": ["Book"],
              "summary": "Cancella un libro",
              "parameters": [
                {
                  "name": "titolo",
                  "in": "query",
                  "description": "Titolo del libro",
                  "required": true,
                  "type": "string"
                }
              ],
              "responses": {
                "200": {
                  "description": "OK. Libro cancellato correttamente."
                },
                "404": {
                  "description": "NOT FOUND. Libro non trovato"
                }
              }
            }
          }
        },
        "/Multa": {
            "post": {
              "tags": ["Admin"],
              "summary": "Crea una multa per un utente",
              "parameters": [
                {
                  "name": "body",
                  "in": "body",
                  "description": "Dettagli della multa",
                  "required": true,
                  "schema": {
                    "$ref": "#/definitions/Multa"
                  }
                }
              ],
              "responses": {
                "201": {
                  "description": "CREATED. Multa creata corettamente"
                },
                "404": {
                  "description": "NOT FOUND. Utente non trovato."
                },
                "500": {
                  "description": "SERVER ERROR. Errore del server."
                }
              }
            }
        },       

 "definitions": {
    "utente": {
      "type": "object",
      "properties": {
        "utente_id": {"type" : "number", "example" : 5},
        "nome" : {"type": "string", "example": "Mario"},
        "cognome" : {"type": "string", "example": "Rossi"},
        "mail" : {"type": "string", "example": "user@example.com"},
        "password" : {"type": "string", "example": "password123"},
        "libri_noleggiati" : {"type" : "array", "example": "null"},
        "n_libri" : {"type" : "number", "example": 1}  
      },
      "required": ["utente_id", "nome" ,"cognome", "mail", "password"]
    },
 
    "Book": {
      "type": "object",
      "properties": {
        "book_id": { "type": "number", "example": 7},
        "titolo": { "type": "string", "example": "titolo libro" },
        "Author_sur": { "type": "string", "example": "Cognome Autore" },
        "Author_name": { "type": "string", "example": "Nome autore" },
        "genre" : {"type" : "string", "example": "Giallo"},
        "Is_available" : {"type": "boolean", "example": "true"},
        "scadenza": {"type": "date", "format": "date-time", "example": "2023-05-21T10:00:00Z"}

      },
      "required": ["book_id", "titolo", "Author_sur", "Author_name", "genre", "Is_available"]
    },
    "Multa": {
      "type": "object",
      "properties": {
        "mail": { "type": "string", "example": "user@example.com" },
        "paga_entro": { "type": "string", "format": "date-time", "example": "2023-05-21T10:00:00Z" },
        "importo": { "type": "number", "example": 30 }
      },
      "required": ["mail", "paga_entro", "importo"]
    },
    "prenotazione": {
      "type": "object",
      "properties": {
        "mail": { "type": "string", "example": "user@example.com" },
        "titolo": { "type": "string", "example": "Il barone rampante" },
        "data": { "type": "string", "format": "date-time", "example": "2023-05-21T10:00:00Z" },
        "tipo_app": { "type": "string", "example": "Donare un libro" }
      },
      "required": ["mail", "titolo"]
    },
    "Appuntamento": {
      "type": "object",
      "properties": {
        "mail": { "type": "string", "example": "user@example.com" },
        "data": { "type": "string", "format": "date-time", "example": "2023-05-21T10:00:00Z" },
        "tipo_app": { "type": "string", "example": "Donare un libro" }
      },
      "required": ["mail", "data", "tipo_app"]
    }
  }
}